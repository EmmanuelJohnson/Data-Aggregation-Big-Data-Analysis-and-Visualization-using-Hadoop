[What you need to know to start the day: Get New York Today in your inbox.]A highly unusual public feud broke out between prosecutors and top police officials on Friday after the Manhattan district attorney’s decision to drop charges against one of the men pummeled by the police with batons during a chaotic arrest in Washington Heights.The office of the district attorney, Cyrus R. Vance Jr., fielded angry phone calls from two of the Police Department’s senior officials — Terence Monahan, the chief of department, and Edward Delatorre, the chief of the transit bureau — over its handling of the matter.And in an uncharacteristically public salvo, the police commissioner, James P. O’Neill, took to Twitter to sharply criticize Mr. Vance’s decision not to charge one of the men, Sydney Williams, 37, and not to seek bail on the second, Aaron Grissom, 36.Mr. O’Neill said Mr. Vance’s handling of the matter put the safety of police officers and the public in jeopardy and sent the wrong message to New Yorkers.During a radio interview with Joe Piscopo later in the day, Mr. O’Neill defended the officers’ actions, saying the violence had started when Mr. Grissom refused to be arrested and punched one of the police. “You can’t punch a cop,” he said. “You can’t fight a cop. You can’t resist arrest. You have to respect the police.”Mr. Vance declined to respond to Mr. O’Neill’s criticisms. “Our office is conducting a full, fair and independent investigation into the alleged offenses for which Mr. Grissom and Mr. Williams were arrested,” Danny Frost, the district attorney’s spokesman, said. “We are separately conducting a full, fair and independent investigation into the force used by officers during this encounter.”The police commissioner’s comments underscored the simmering tensions between the two law enforcement agencies. Though they historically have been closely aligned, Mr. Vance’s office has met resistance from the Police Department as it has embraced more liberal policies, like not prosecuting all low-level arrests for marijuana possession.Still, over his two-year tenure, Mr. O’Neill has rarely clashed openly with Mr. Vance, even when other high-ranking members of his department were accusing Mr. Vance’s office of mismanaging the investigation into allegations of sexual misconduct against the Hollywood producer Harvey Weinstein.The brawl in Washington Heights erupted Tuesday afternoon after police officers — identified in court documents as Jeffrey Mota and Bramlin Rosa — asked Mr. Williams and Mr. Grissom to leave the subway entrance at 169th Street and Broadway after complaints from riders that the men were smoking on the stairs, the police said.In a six-minute video taken by a passer-by and posted to Instagram, the police are seen pummeling Mr. Grissom with batons and kicking him.In a separate video obtained from a nearby bodega, which the police released, Mr. Grissom can be seen just before the Instagram video swinging at the police officers as they back across the street.The incident has prompted an internal affairs investigation into accusations of excessive force, though Mr. O’Neill pushed back against that allegation Friday morning.“What I’m seeing right now, and this is preliminary results, these cops did exactly what we asked them to do,” he said in the radio interview.Mr. Williams and Mr. Grissom were arrested and charged with felony assault. But when they were brought before a judge Thursday evening, prosecutors deferred charges against Mr. Williams, who had been struck in the head with a baton early in the video. He was released. Mr. Grissom was charged with assault, attempted assault and resisting arrest, but prosecutors did not ask for bail and he was also released.The police said the men were arrested in the same station last month on charges they attacked police officers with fists and a baseball bat. They were charged with resisting arrest and drug possession.In a Facebook video, first reported by The Daily News, Mr. Williams boasted that he had filed multiple lawsuits against the police in the past after rough arrests. “They get hurt and I get paid,” he said.Mr. O’Neill said, “He’s a serial resister, and when it’s over, he sues the Police Department.”Sanford Rubenstein, a lawyer for Mr. Williams and Mr. Grissom, said they planned to sue the city over the arrest.“The Manhattan D.A.’s office needs to wake up and realize that police officers cannot do our job when prosecutors won’t do theirs,” said Patrick J. Lynch, president of the Patrolmen’s Benevolent Association, which represents the city’s police officers. “Every perp who has ever thought about taking a swing at a cop is watching the outcome in this case.”The incident has created a politically difficult situation for Mayor Bill de Blasio, who ran as a criminal justice reformer and has gone through periods of conflict with the police. He said on Wednesday that he was concerned about the beating Mr. Grissom sustained at the hands of officers in the video. He now finds himself walking a fine line between his police commissioner and the Manhattan district attorney.“It is absolutely unacceptable to hit a cop or to resist arrest,” Olivia Lapeyrolerie, a spokeswoman for Mr. de Blasio, said in a statement Friday. “We won’t tolerate that, and the Mayor believes that behavior should be met with the toughest punishment available under the law. The Mayor has also been clear that there were parts of the video that gave him real concern.”